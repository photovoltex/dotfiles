#!/bin/sh

cd ~

mv ~/.zshrc ~/.zshrc.old

sudo systemctl enable NetworkManager.service
sudo systemctl start NetworkManager.service

# git setup in the root directory
git config --global init.defaultBranch main
git init
git branch -m main
git remote add origin https://github.com/photovoltex/dotfiles.git
git fetch
git checkout -t origin/main
git submodule update --init

# install base packages
sudo pacman -S \
    base-devel cmake go nodejs npm \
    xorg xorg-xinit i3 picom rofi lightdm lightdm-slick-greeter \
    kitty firefox feh zathura nemo flameshot telegram-desktop discord \
    blueman bluez bpytop neofetch \
    unzip playerctl xclip ntfs-3g otf-fira-sans ttf-hanazono nvidia-settings \
    lolcat cowsay

# installation of rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# install feather (font stuff for polybar)
mkdir -p ~/.local/share/fonts
curl -L https://github.com/adi1090x/polybar-themes/raw/master/fonts/feather.ttf -o ~/.local/share/fonts/feather.ttf

# auto install yay
mkdir -p ~/Downloads/yay
git clone https://aur.archlinux.org/yay.git ~/Downloads/yay
cd ~/Downloads/yay
makepkg -f
sudo pacman -U ~/Downloads/yay/yay-?*.pkg.tar.zst

# install base packages
yay -S ncspot polybar uwufetch visual-studio-code-bin \
    python-pip python-pywal themix-full-git \ 
    nerd-fonts-jetbrains-mono ttf-symbola

# symlink setup to use config from repository
sudo usermod -aG $(whoami) lightdm
chmod g+rx ~
sudo mv /etc/lightdm/lightdm.conf ~/.lightdm.conf
sudo ln -s ~/.config/lightdm/lightdm.conf /etc/lightdm/lightdm.conf
sudo ln -s ~/.config/lightdm/slick-greeter.conf /etc/lightdm/slick-greeter.conf

# install icons
cd ~/Downloads
git clone https://github.com/vinceliuice/Tela-circle-icon-theme.git
cd ~/Downloads/Tela-circle-icon-theme
./install.sh

# install a pywal addons
cd ~/Downloads
git clone https://github.com/matteoguarda/telegram-palette-gen
cd ~/Downloads/telegram-palette-gen
./telegram-palette-gen

pip install pywalfox
pywalfox install

~/.scripts/uwal ~/Wallpapers/pinkblue.jpg

curl -L https://github.com/ful1e5/BreezeX_Cursor/releases/download/v1.0.2/BreezeX-Dark.tar.gz -o ~/Downloads/BreezeX-Black.tar.gz
mkdir -p ~/.local/share/icons
cd ~/.local/share/icons
tar -xf ~/Downloads/BreezeX-Black.tar.gz

sudo systemctl enable lightdm
sudo systemctl restart lightdm
