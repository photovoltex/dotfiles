#!/bin/sh

cd ~

mv ~/.zshrc ~/.zshrc.old

sudo systemctl enable NetworkManager.service
sudo systemctl start NetworkManager.service

# git setup in the root directory
git config --global init.defaultBranch main
git init
git branch -m main
git remote add origin https://github.com/photovoltex/dotfiles.git
git fetch
git checkout -t origin/main
git submodule update --init

# install base packages
sudo pacman -S \
    base-devel cmake go \
    xorg xorg-xinit i3 picom rofi lightdm lightdm-slick-greeter \
    ttf-fira-sans ttf-fira-code \
    kitty nitrogen firefox nemo code \
    unzip bpytop neofetch lolcat

# auto install yay
mkdir -p ~/Downloads/yay
git clone https://aur.archlinux.org/yay.git ~/Downloads/yay
cd ~/Downloads/yay
makepkg -f
sudo pacman -U ~/Downloads/yay/yay-?*.pkg.tar.zst
rm -rf ~/Downloads/yay

# install base packages
yay -S python-pip python-pywal polybar uwufetch

# symlink setup to use config from repository
sudo usermod -aG $(whoami) lightdm
chmod g+rx ~
sudo mv /etc/lightdm/lightdm.conf ~/.lightdm.conf
sudo ln -s ~/.config/lightdm/lightdm.conf /etc/lightdm/lightdm.conf
sudo ln -s ~/.config/lightdm/slick-greeter.conf /etc/lightdm/slick-greeter.conf
sudo ln -s ~/Wallpapers/3440x1440p_neon.jpg /usr/share/pixmaps/3440x1440p_neon.jpg

wal -i ~/Wallpapers/default-?*.jpg

sudo systemctl enable lightdm
sudo systemctl restart lightdm
